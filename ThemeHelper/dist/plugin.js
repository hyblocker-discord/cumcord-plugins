(function(C,h,y,f,g){"use strict";var R=Object.defineProperty,b=Object.getOwnPropertySymbols,_=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable,v=(l,e,t)=>e in l?R(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t,E=(l,e)=>{for(var t in e||(e={}))_.call(e,t)&&v(l,t,e[t]);if(b)for(var t of b(e))P.call(e,t)&&v(l,t,e[t]);return l};typeof require!="undefined"&&require;const u=["message-2qnXI6","container-2Pjhx-","containerDefault--pIXnN","labelContainer-1BLJti","item-PXvHYJ","channel-2QD9_O","content-1x5b-n","listRow-hutiT_","resultFocused-3aIoYe","item-2J2GlB","actionButton-VzECiy","autocompleteRowVertical-q1K4ky"];let o={},d=[];var L=l=>({onLoad(){this.mouseEventBind=this.mouseEventBind.bind(this),o=this,o.userCache={},o.store=l.persist.store,document.body.addEventListener("mousemove",this.mouseEventBind("mouse")),document.body.addEventListener("mousedown",this.mouseEventBind("click"));const e=f.webpack.findByDisplayName("PeopleListItem");o.getPrimaryColorForAvatar=f.webpack.findByProps("getPrimaryColorForAvatar"),o.UserPopoutAvatar=f.webpack.findByProps("UserPopoutAvatar"),d.push(y.after("render",e.prototype,this.friendRowPatch))},onUnload(){document.body.removeEventListener("mousemove",this.mouseEventBind("mouse")),document.body.removeEventListener("mousedown",this.mouseEventBind("click"));for(let e=0;e<d.length;e++)d[e]();d.length=0},mouseEventBind(e){return function(t){t=t||window.event;let n=t.target||t.srcElement,a=!1;for(let r=0;r<u.length;r++)if(n.classList.contains(u[r])){a=!0;break}for(let r=0;r<4&&!a;r++)if(n.parentElement!=null){n=n.parentElement;for(let c=0;c<u.length&&!a;c++)n.classList.contains(u[c])&&(a=!0)}if(a){const r=n.getBoundingClientRect();let c=t.clientX-r.left,p=t.clientY-r.top;c-=r.width/2,p-=r.height/2,n.style.setProperty(`--${e}X`,`${c}px`),n.style.setProperty(`--${e}Y`,`${p}px`)}}},getCssVar(e){const n=getComputedStyle(document.documentElement).getPropertyValue(`--${e}`).trim().toLowerCase();return n=="1"||n=="true"},friendRowPatch(e,t){var n;try{const a=t.props.children(),r=(n=h.findInReactTree(a,s=>s&&s.user))==null?void 0:n.user,c=o.fetchUser(r.id);if(o.getCssVar("open-profile-via-pfp-friends")){const s=h.findInReactTree(a,m=>m&&m.type&&m.type.displayName&&m.type.displayName==="UserInfo")}let i=null;r.accentColor?(i=r.accentColor,o.cacheUser(r)):c.accentColor?i=c.accentColor:(o.getPrimaryColorForAvatar.getPrimaryColorForAvatar(r.getAvatarURL()).then(s=>o.cacheUser(r,{accentColorGenerated:s})),i=c.autoAccent),i=o._numberToRgba(i);const w=g.React.cloneElement(a.props.children,{role:"listitem","data-list-item-id":`people-list___${r.id}`,tabindex:-1,"data-user-id":r.id,"data-banner-url":c.bannerURL,"data-accent-color":i,style:E({"--user-banner":c.bannerURL?`url("${c.bannerURL}")`:null,"--user-accent-color":i},a.props.children.props.style)});return t.props.children=function(){return w},t}catch(a){return C.log(`[FATAL]: ${a.stack}`),t}},_numberToRgba(e,t=1){const{r:n,g:a,b:r}=o._numberToRgb(e);return t===1?`rgb(${n}, ${a}, ${r})`:`rgba(${n}, ${a}, ${r}, ${t})`},_numberToRgb(e){console.log(e);const t=(e&16711680)>>>16,n=(e&65280)>>>8,a=e&255;return{r:t,g:n,b:a}},_rgbToNumber(e){return((e[0]<<8)+e[1]<<8)+e[2]},cacheUser(e,t){let n=null,a=!1,r=null;(t==null?void 0:t.accentColorGenerated)&&(r=o._rgbToNumber(t.accentColorGenerated)),o.userCache[e.id]?n=o.userCache[e.id]:(n=o.store[userId],Object.keys(n).length==0&&(n={bannerURL:null,accentColor:null,autoAccent:null})),!(e.bannerURL==null&&e.accentColor==null)&&e.bannerURL!=n.bannerURL&&(n.bannerURL=e.bannerURL,a=!0),e.accentColor&&e.accentColor!=n.accentColor&&(n.accentColor=e.accentColor,a=!0),(t==null?void 0:t.accentColorGenerated)&&r!=n.autoAccent&&(n.autoAccent=r,a=!0),a&&(o.store[e.id]=n,o.userCache[e.id]=n,console.log("[Hyblocker's Theme Helper]",`Cached user "${e.username}#${e.discriminator}"!`))},fetchUser(e){return o.userCache[e]||(o.userCache[e]=o.store[e],Object.keys(o.userCache[e]).length==0&&(o.userCache[e]={bannerURL:null,accentColor:null,autoAccent:null})),o.userCache[e]}});return L})(cumcord.utils.logger,cumcord.utils,cumcord.patcher,cumcord.modules,cumcord.modules.common);
