(function(L,h,v,m,C){"use strict";var y=Object.defineProperty,g=Object.getOwnPropertySymbols,R=Object.prototype.hasOwnProperty,_=Object.prototype.propertyIsEnumerable,b=(c,e,t)=>e in c?y(c,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):c[e]=t,P=(c,e)=>{for(var t in e||(e={}))R.call(e,t)&&b(c,t,e[t]);if(g)for(var t of g(e))_.call(e,t)&&b(c,t,e[t]);return c};typeof require!="undefined"&&require;const u=["message-2qnXI6","container-2Pjhx-","containerDefault--pIXnN","labelContainer-1BLJti","item-PXvHYJ","channel-2QD9_O","content-1x5b-n","listRow-hutiT_","resultFocused-3aIoYe","item-2J2GlB","actionButton-VzECiy","autocompleteRowVertical-q1K4ky"];let o={},f=[];var E=c=>({onLoad(){this.mouseEventBind=this.mouseEventBind.bind(this),o=this,o.userCache={},o.settings={},o.settings.get=(t,n)=>c.store[t]?c.store[t]:n,o.settings.set=(t,n)=>{c.store[t]=n},document.body.addEventListener("mousemove",this.mouseEventBind("mouse")),document.body.addEventListener("mousedown",this.mouseEventBind("click"));const e=m.webpackModules.findByDisplayName("PeopleListItem");o.getPrimaryColorForAvatar=m.webpackModules.findByProps("getPrimaryColorForAvatar"),o.UserPopoutAvatar=m.webpackModules.findByProps("UserPopoutAvatar"),f.push(v.after("render",e.prototype,this.friendRowPatch))},onUnload(){document.body.removeEventListener("mousemove",this.mouseEventBind("mouse")),document.body.removeEventListener("mousedown",this.mouseEventBind("click"));for(let e=0;e<f.length;e++)f[e]();array.length=0},mouseEventBind(e){return function(t){t=t||window.event;let n=t.target||t.srcElement,l=!1;for(let r=0;r<u.length;r++)if(n.classList.contains(u[r])){l=!0;break}for(let r=0;r<4&&!l;r++)if(n.parentElement!=null){n=n.parentElement;for(let a=0;a<u.length&&!l;a++)n.classList.contains(u[a])&&(l=!0)}if(l){const r=n.getBoundingClientRect();let a=t.clientX-r.left,p=t.clientY-r.top;a-=r.width/2,p-=r.height/2,n.style.setProperty(`--${e}X`,`${a}px`),n.style.setProperty(`--${e}Y`,`${p}px`)}}},getCssVar(e){const n=getComputedStyle(document.documentElement).getPropertyValue(`--${e}`).trim().toLowerCase();return n=="1"||n=="true"},friendRowPatch(e,t){var n;const l=t.props.children(),r=(n=h.findInReactTree(l,s=>s&&s.user))==null?void 0:n.user,a=o.fetchUser(r.id);if(o.getCssVar("open-profile-via-pfp-friends")){const s=h.findInReactTree(l,d=>d&&d.type&&d.type.displayName&&d.type.displayName==="UserInfo");console.log(l),console.log(s),console.log("====================")}let i=null;r.accentColor?(i=r.accentColor,o.cacheUser(r)):a.accentColor?i=a.accentColor:(o.getPrimaryColorForAvatar.getPrimaryColorForAvatar(r.getAvatarURL()).then(s=>o.cacheUser(r,{accentColorGenerated:s})),i=a.autoAccent),i=o._numberToRgba(i);const w=C.React.cloneElement(l.props.children,{role:"listitem","data-list-item-id":`people-list___${r.id}`,tabindex:-1,"data-user-id":r.id,"data-banner-url":a.bannerURL,"data-accent-color":i,style:P({"--user-banner":a.bannerURL?`url("${a.bannerURL}")`:null,"--user-accent-color":i},l.props.children.props.style)});return t.props.children=function(){return w},t},_numberToRgba(e,t=1){const{r:n,g:l,b:r}=o._numberToRgb(e);return t===1?`rgb(${n}, ${l}, ${r})`:`rgba(${n}, ${l}, ${r}, ${t})`},_numberToRgb(e){const t=(e&16711680)>>>16,n=(e&65280)>>>8,l=e&255;return{r:t,g:n,b:l}},_rgbToNumber(e){return((e[0]<<8)+e[1]<<8)+e[2]},cacheUser(e,t){let n=null,l=!1,r=null;(t==null?void 0:t.accentColorGenerated)&&(r=o._rgbToNumber(t.accentColorGenerated)),o.userCache[e.id]?n=o.userCache[e.id]:n=o.settings.get(e.id,{bannerURL:null,accentColor:null,autoAccent:null}),!(e.bannerURL==null&&e.accentColor==null)&&e.bannerURL!=n.bannerURL&&(n.bannerURL=e.bannerURL,l=!0),e.accentColor&&e.accentColor!=n.accentColor&&(n.accentColor=e.accentColor,l=!0),(t==null?void 0:t.accentColorGenerated)&&r!=n.autoAccent&&(n.autoAccent=r,l=!0),l&&(o.settings.set(e.id,n),o.userCache[e.id]=n,console.log("[Hyblocker's Theme Helper]",`Cached user "${e.username}#${e.discriminator}"!`))},fetchUser(e){return o.userCache[e]||(o.userCache[e]=o.settings.get(e,{bannerURL:null,accentColor:null,autoAccent:null})),o.userCache[e]}});return E})(cumcord.utils.logger,cumcord.utils,cumcord.patcher,cumcord.modules,cumcord.modules.common);
